1. 合并资源比并行下载资源更快吗?

对于体积较大的资源,是否合并对于加载时间没有明显影响,但拆分资源可以更好地利用浏览器缓存,不会因为某个资源的更新导致所有资源缓存失效,而资源合并后,任一资源的更新都会导致整体资源的缓存失效.另外还可以利用域名分片技术,将资源拆分部署到不同域名下,即可以分散服务器的压力,又可以避免网络抖动带来的影响.

对于小资源,合并资源往往具有更快的加载速度,但在网络带宽状态良好的情况下,因为提升的时间单位以 ms 计量,收益可以忽略,如果网络延迟很大,服务器响应速度慢,则可以带来一定的收益,但是在高延迟的网络场景下,又要注意合并资源后可能带来的网络往返次数的增加,进而影响到请求时间.

2. CDN的原理

CDN的基本原理是广泛采用各种缓存服务器，将这些缓存服务器分布到用户访问相对集中地区或网络中，在用户访问网站时，利用全局负载技术将用户的访问指向距离最近的工作正常的缓存服务器上，由缓存服务器直接响应用户请求。最简单的CDN网络由一个DNS服务器和几台缓存服务器就可以组成，当用户输入URL按下回车，经过本地DNS系统解析，DNS系统会最终将域名的解析权交给CNAME指向的CDN专用DNS服务器，然后将得到全局负载均衡设备的IP地址，用户向全局负载设备发送内容访问请求，全局负载均衡设备将实时根据网络流量和各节点的连接，负载状态以及到用户的距离和响应时间等综合信息将用户的请求重新导向离用户最近的服务节点上，使用户就近取得所需内容，解决internet网络拥挤的情况，提高用户访问网站的响应速度。

3. 正向代理和反向代理

我们常说的代理就是正向代理，正向代理的过程，它隐藏了真实的请求客户端，服务端不知道真实的客户端是谁，客户端的请求服务都被代理服务器代替来请求。

反向代理隐藏了真实的服务端，当我们请求一个网站的时候，背后可能有成千上万台服务器为我们服务，我们并不清楚具体是哪一台，我么只需要知道反向代理服务器是谁就好了，反向代理服务器会帮我们把请求转发到真实的服务器哪里去。反向代理服务器一般用来实现负载平衡。

4. http 请求方法 options 方法有什么用？

options请求与HEAD请求类似，一般用于客户端查看哪服务端的性能，测试服务端功能是否正常，对于复杂请求，通常使用options方法发送嗅探请求，以判断是否有对指定资源的访问权限。

5. HEAD请求
`HEAD`请求是HTTP协议中的一种请求方法，它的作用与GET请求类似，但有一些关键的区别：
**主要作用：**
  1. 获取元数据：HEAD请求用于获取目标资源的源数据，而不是返回资源本身的内容。元数据包括响应头（headers）中的信息，如`Content-Type`、`Content-Length`,`Last-Modified`, `ETag`等；
  2. 检查资源状态：通过HEAD请求，客户端可以检查服务器上某个资源的状态，而无需下载整个资源。这在确认资源是否存在，是否被修改，或者获取资源的大小等信息时非常有用。
  3. 节省宽带：由于HEAD请求不返回响应体，只返回响应头，因此可以节省带宽，特别是需要频繁检测资源状态的情况下。
**应用场景：**
  - 缓存验证：在客户端缓存了某个资源的情况下，可以使用HEAD请求来检测服务器上的资源是否发生了变化，通过ETag或Last-Modified等头信息，从而决定是否需要重新下载资源。
  - 预检请求：在某些情况下，客户端可能需要检查某个资源是否存在或者是否可以访问，然后再决定是否发起GET请求。例如，在下载大文件之前，可以先使用HEAD请求检查文件的大小和可用性。

  - 监控和调试：在监控或调试网络服务时，HEAD请求可以用来快速检查服务的可用性和响应状态，而无需返回响应数据。

6. 简单请求与复杂请求

- 简单请求：没有设置自定义header的get，head，post方法；
- 复杂请求：非get，head方法，设置了自定义header的post方法，以及其他方法（post，put，delete，patch等）

在发送复杂请求之前会先发送一个预检请求，预检请求的作用如下：
  1. 检查服务器支持的HTTP方法
  预检请求可以用来价差服务器支持哪些HTTP方法。客户端可以通过OPTIONS请求获取服务器支持的方法列表，从而决定是否发送实际请求；
  2. 检查服务器支持的HTTP头
  预检请求还可以用来检查服务器支持哪些HTTP头。客户端可以通过OPTIONS请求获取服务器支持的头列表，从而决定是否发送实际请求；
  3. 检查跨域请求的权限
  在跨域请求中，预检请求用于检查服务器是否允许跨域请求。服务器可以通过Access-Control-Allow-Origin、Access-Control-Allow-Methods和Access-Control-Allow-Headers等头声明允许的源、方法和头。

7. http1.1 和 http1.0 之间有哪些区别？

http1.1 相对于 http1.0 有这样几个区别：
（1）连接方面的区别，http1.1 默认使用持久连接，而 http1.0 默认使用非持久连接。http1.1 通过使用持久连接来使多个 http 请求复用同一个 TCP 连接，以此来避免使用非持久连接时每次需要建立连接的时延。
（2）资源请求方面的区别，在 http1.0 中，存在一些浪费带宽的现象，例如客户端只是需要某个对象的一部分，而服务器却将整个对象送过来了，并且不支持断点续传功能，http1.1 则在请求头引入了 range 头域，它允许只请求资源的某个部分，即返回码是 206（Partial Content），这样就方便了开发者自由的选择以便于充分利用带宽和连接。

（3）缓存方面的区别，在 http1.0 中主要使用 header 里的 If-Modified-Since,Expires 来做为缓存判断的标准，http1.1 则引入了更多的缓存控制策略例如 ETag、If-Unmodified-Since、If-Match、If-None-Match 等更多可供选择的缓存头来控制缓存策略。

（4）http1.1 中还新增了 host 字段，用来指定服务器的域名。http1.0 中认为每台服务器都绑定一个唯一的 IP 地址，因此，请求消息中的 URL 并没有传递主机名（hostname）。但随着虚拟主机技术的发展，在一台物理服务器上可以存在多个虚拟主机，并且它们共享一个IP地址。因此有了 host 字段，就可以将请求发往同一台服务器上的不同网站。

（5）http1.1 相对于 http1.0 还新增了很多方法，如 PUT、HEAD、OPTIONS 等。

8. 即时通讯的实现，短轮询、长轮询、SSE 和 WebSocket 间的区别？

- 短轮询和长轮询的目的都是用于实现客户端和服务器端的一个即时通讯。

- 短轮询的基本思路就是浏览器每隔一段时间向浏览器发送 http 请求，服务器端在收到请求后，不论是否有数据更新，都直接进行
响应。这种方式实现的即时通信，本质上还是浏览器发送请求，服务器接受请求的一个过程，通过让客户端不断的进行请求，使得客
户端能够模拟实时地收到服务器端的数据的变化。这种方式的优点是比较简单，易于理解。缺点是这种方式由于需要不断的建立 ht
tp 连接，严重浪费了服务器端和客户端的资源。当用户增加时，服务器端的压力就会变大，这是很不合理的。

- 长轮询的基本思路是，首先由客户端向服务器发起请求，当服务器收到客户端发来的请求后，服务器端不会直接进行响应，而是先将
这个请求挂起，然后判断服务器端数据是否有更新。如果有更新，则进行响应，如果一直没有数据，则到达一定的时间限制才返回。
客户端 JavaScript 响应处理函数会在处理完服务器返回的信息后，再次发出请求，重新建立连接。长轮询和短轮询比起来，它的
优点是明显减少了很多不必要的 http 请求次数，相比之下节约了资源。长轮询的缺点在于，连接挂起也会导致资源的浪费。

- SSE 的基本思想是，服务器使用流信息向服务器推送信息。严格地说，http 协议无法做到服务器主动推送信息。但是，有一种变通
方法，就是服务器向客户端声明，接下来要发送的是流信息。也就是说，发送的不是一次性的数据包，而是一个数据流，会连续不断
地发送过来。这时，客户端不会关闭连接，会一直等着服务器发过来的新的数据流，视频播放就是这样的例子。SSE 就是利用这种机
制，使用流信息向浏览器推送信息。它基于 http 协议，目前除了 IE/Edge，其他浏览器都支持。它相对于前面两种方式来说，不
需要建立过多的 http 请求，相比之下节约了资源。

- 上面三种方式本质上都是基于 http 协议的，我们还可以使用 WebSocket 协议来实现。WebSocket 是 Html5 定义的一个新协
议，与传统的 http 协议不同，该协议允许由服务器主动的向客户端推送信息。使用 WebSocket 协议的缺点是在服务器端的配置
比较复杂。WebSocket 是一个全双工的协议，也就是通信双方是平等的，可以相互发送消息，而 SSE 的方式是单向通信的，只能
由服务器端向客户端推送信息，如果客户端需要发送信息就是属于下一个 http 请求了。

9. 怎么实现多个网站之间共享登录状态

在多个网站之间共享登录状态指的是单点登录。多个应用系统中，用户只需要登录一次就可以访问所有相互信任的应用系统。

用户信息的验证中心独立出来，作为一个单独的认证中心，该认证中心的作用是判断客户端发送的账号密码的正确性，然后向客户端返回对应的用户信息，并且返回一个服务端秘钥加密的登录信息的token，给客户端的token有一定的有效时间。当一个应用跳转到另一个应用系统时，通过url参数的方式来传递token，然后转移到发送给认证中心，认证中心对token进行解密后验证，如果用户信息没有失效，则向客户端返回对应的用户信息，如果失效了则将页面重定向会单点登录页面。
