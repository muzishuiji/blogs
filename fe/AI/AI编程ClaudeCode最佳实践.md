## Claude Code最佳实践

> 关键原则总结：小步快跑 领域分工 即刻刹车

### 一、 上下文压缩

- 痛点：模型的上下文大小是有限的，不能无限制保留对话记忆；
- 核心提示词：
```
“我需要总结当前所有工作内容，后续将其他开发者接手继续开发。”
```
- 作用
    - 生成会话摘要作为后续协作基础；
    - 突破上下文长度限制保持连续性；

‘### 二、先分析问题解

- 痛点：盲目修改会造成错误，要先由决策权；
- 关键提示词：
```
“请分析此Bug的根本原因，并制定修复方案。”
```
- 为何有效：
  - 强制先分析后执行，避免盲目修改；
  - 输出可执行计划，并分析不同方案的优劣供开发者决策；

### 三、测试驱动开发（TDD）&安全限制
- 强制规范：
    - ✅测试优先：编码器按要求Claude生成测试用例；
    - 📏小步迭代：每次仅允许微小变更；
    - 📒即时验证：变更后立即运行测试；
    - 🧹静态检查：提交前执行Typescript类型检查和lint；
    - 📅高频提交：建立安全回滚点；

- 优势：
    - 防止代码失控；
    - 构建版本安全网；

### 四、视觉化协作
- 痛点：有些内容直接截图，模型更容易理解；
- 截图工作流：
    - 附截图并指令：“请按此截图实现界面（图片）”；
    - 适用场景：
        - 精准还原UI设计；
        - 调试布局问题；
        - 解释复杂需求；

### 五、专用子代理协作模式

- 领域分工：
    - 主代理：
        - 编码专家
        - 方案规划师
        - 测试工程师
        - 代码审查员
- 优势：
    - 专业模块由专业的agent处理；
    - 避免单代理过载；

### 六、实时纠错机制
- 干预指令：
```
“立即停止，当前方向有误，请改用（新方案）。”
```
- 触发时机：
    - 输出质量下滑；
    - 方案偏离需求；
    - 出现无关内容；
